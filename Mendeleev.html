<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9-сынып Химия - Органикалық Химия</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2E7D32;
            --secondary: #4CAF50;
            --accent: #FF9800;
            --dark: #1B5E20;
            --light: #E8F5E9;
            --text: #333;
            --card-bg: #fff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--text);
            line-height: 1.6;
        }
        
        /* Навигация */
        header {
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .nav-menu {
            display: flex;
            gap: 20px;
        }
        
        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .nav-menu a:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Основные секции */
        section {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--dark);
            position: relative;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--accent);
        }
        
        /* Карточки уроков */
        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .lesson-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border-top: 5px solid var(--accent);
        }
        
        .lesson-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .lesson-icon {
            background: var(--light);
            padding: 20px;
            text-align: center;
            font-size: 2.5rem;
        }
        
        .lesson-content {
            padding: 20px;
        }
        
        .lesson-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .tag {
            background: var(--light);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: var(--dark);
        }
        
        /* Тесты */
        .test-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .question {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .option {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            border-color: var(--secondary);
            background: #f9f9f9;
        }
        
        .option.selected {
            border-color: var(--primary);
            background: #E8F5E9;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--dark);
        }
        
        /* Формула конструктор */
        .formula-builder {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .elements {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }
        
        .element {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid var(--secondary);
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .element:hover {
            transform: scale(1.1);
            background: var(--light);
        }
        
        .workspace {
            min-height: 100px;
            border: 2px dashed #ddd;
            border-radius: 10px;
            margin: 20px 0;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        
        /* Тапсырмалар */
        .task {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        /* Подвал */
        footer {
            background: var(--dark);
            color: white;
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
        }
        
        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
        }
        
        .modal-content {
            max-width: 800px;
            background: white;
            margin: 30px auto;
            border-radius: 15px;
            padding: 30px;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        /* Мобильная адаптация */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--dark);
                flex-direction: column;
                padding: 20px;
            }
            
            .nav-menu.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .lessons-grid {
                grid-template-columns: 1fr;
            }
            
            section {
                padding: 20px 15px;
            }
            
            .modal-content {
                margin: 10px;
                padding: 20px;
            }
        }
        
        /* Дополнительные стили */
        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .result {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .success {
            background: #E8F5E9;
            color: var(--dark);
        }
        
        .error {
            background: #FFEBEE;
            color: #C62828;
        }
        
        .hint {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
        
        .formula-display {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
        }
        
        .interactive-formula {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .atom {
            padding: 8px 15px;
            background: var(--light);
            border-radius: 8px;
            font-weight: bold;
            margin: 2px;
        }
        
        .subscript {
            font-size: 0.8em;
            vertical-align: sub;
        }
    </style>
</head>
<body>
    <!-- Шапка -->
    <header>
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-atom"></i>
                <span>Органикалық Химия</span>
            </div>
            
            <button class="mobile-menu-btn" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="nav-menu" id="navMenu">
                <a href="#lessons"><i class="fas fa-book"></i> Сабақтар</a>
                <a href="#tests"><i class="fas fa-question-circle"></i> Тесттер</a>
                <a href="#formula"><i class="fas fa-flask"></i> Формулалар</a>
                <a href="#tasks"><i class="fas fa-tasks"></i> Тапсырмалар</a>
                <a href="#about"><i class="fas fa-info-circle"></i> Біз туралы</a>
            </nav>
        </div>
    </header>

    <!-- Главный баннер -->
    <section style="background: linear-gradient(135deg, var(--light), #C8E6C9); padding: 60px 20px; text-align: center;">
        <h1 style="color: var(--dark); font-size: 2.5rem; margin-bottom: 20px;">
            9-сынып Химия - Органикалық Химия
        </h1>
        <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 30px;">
            Көмірсутектерден бастап нәруыздарға дейін - органикалық химияның қызықты әлеміне саяхат!
        </p>
        <button class="btn btn-primary" onclick="startLearning()">
            <i class="fas fa-play"></i> Оқуды бастау
        </button>
    </section>

    <!-- Сабақтар -->
    <section id="lessons">
        <h2 class="section-title">
            <i class="fas fa-graduation-cap"></i> Сабақтар
        </h2>
        
        <div class="lessons-grid" id="lessonsContainer">
            <!-- Уроки будут загружены через JavaScript -->
        </div>
    </section>

    <!-- Тесттер -->
    <section id="tests" style="background: #f9f9f9;">
        <h2 class="section-title">
            <i class="fas fa-brain"></i> Білімді тексеру
        </h2>
        
        <div class="test-container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h3>Тест тақырыптары</h3>
                <div class="progress-bar" style="width: 200px;">
                    <div class="progress" id="testProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="testTopics">
                <!-- Тест тақырыптары JS арқылы толтырылады -->
            </div>
            
            <div id="testQuestions" style="display: none;">
                <!-- Тест сұрақтары -->
            </div>
            
            <div id="testResult" class="result" style="display: none;">
                <!-- Тест нәтижесі -->
            </div>
        </div>
    </section>

    <!-- Формула конструкторы -->
    <section id="formula">
        <h2 class="section-title">
            <i class="fas fa-shapes"></i> Формула конструкторы
        </h2>
        
        <div class="formula-builder">
            <div style="text-align: center; margin-bottom: 30px;">
                <h3>Молекула құрастыру</h3>
                <p>Элементтерді палеткадан алып, молекула құрастырыңыз</p>
            </div>
            
            <div id="formulaTask" class="task">
                <h4>Тапсырма: <span id="taskName">Метан молекуласын құрастырыңыз</span></h4>
                <p id="taskDescription">CH₄ формуласын құрастырыңыз</p>
            </div>
            
            <div class="elements" id="elementPalette">
                <!-- Элементтер JS арқылы толтырылады -->
            </div>
            
            <div class="workspace" id="workspace">
                <p style="color: #999; margin: auto;">Бұл жерге элементтерді тартыңыз</p>
            </div>
            
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="checkFormula()">
                    <i class="fas fa-check"></i> Тексеру
                </button>
                <button class="btn" onclick="clearWorkspace()" style="background: #f0f0f0;">
                    <i class="fas fa-redo"></i> Тазарту
                </button>
                <button class="btn" onclick="showHint()" style="background: #FFF3E0;">
                    <i class="fas fa-lightbulb"></i> Көмек
                </button>
            </div>
            
            <div id="formulaResult" class="result" style="display: none;"></div>
        </div>
    </section>

    <!-- Тапсырмалар -->
    <section id="tasks">
        <h2 class="section-title">
            <i class="fas fa-pencil-alt"></i> Практикалық тапсырмалар
        </h2>
        
        <div id="tasksContainer">
            <!-- Тапсырмалар JS арқылы толтырылады -->
        </div>
    </section>

    <!-- Модальное окно для уроков -->
    <div class="modal" id="lessonModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">×</button>
            <div id="lessonContent">
                <!-- Контент урока -->
            </div>
        </div>
    </div>

    <!-- Подвал -->
    <footer id="about">
        <div style="max-width: 800px; margin: 0 auto;">
            <h3 style="margin-bottom: 20px;">Органикалық Химия - 9 сынып</h3>
            <p style="margin-bottom: 20px;">Білім беру платформасы химияны жеңіл түсінуге көмектесу үшін жасалған</p>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                <div style="text-align: center;">
                  <div style="font-size: 2rem; color: var(--accent);">14</div>
<div>Сабақтар</div>

                </div>
                <div style="text-align: center;">
                    <div style="font-size: 2rem; color: var(--accent);">40</div>
                    <div>Тест сұрақтары</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 2rem; color: var(--accent);">∞</div>
                    <div>Тәжірибелер</div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // ==================== ДАННЫЕ УРОКОВ ====================
       const lessons = [
  // 53
  {
    id: 1,
    title: "Органикалық заттардың ерекшеліктері және жіктелуі",
    icon: "fas fa-seedling",
    color: "#4CAF50",
    content: `
      <h2>Органикалық заттардың ерекшеліктері және жіктелуі</h2>
      <div style="background:#E8F5E9;padding:20px;border-radius:10px;margin:20px 0;">
        <h3><i class="fas fa-lightbulb"></i> Негізгі идея</h3>
        <ul>
          <li><strong>Органикалық химия</strong> – көміртек қосылыстарын зерттейді.</li>
          <li>Көміртек <strong>4 валентті</strong>, тізбек құрай алады (катенация).</li>
          <li>Қосылыстар көптүрлі: көмірсутектер және олардың туындылары.</li>
        </ul>
      </div>
      <h3>Класстар (мысалдар):</h3>
      <ul>
        <li>Көмірсутектер: алкандар, алкендер, алкиндер, арендер</li>
        <li>Туындылар: спирттер, альдегидтер, карбон қышқылдары, көмірсулар, аминқышқылдар</li>
      </ul>
      <div style="background:#FFF3E0;padding:20px;border-radius:10px;margin:20px 0;">
        <h4><i class="fas fa-vial"></i> Көрсетілім идеясы</h4>
        <p>Метан, этан, этен, этин, этанол, этаналь, этан қышқылы, глюкоза, аминоэтан қышқылы модельдері.</p>
      </div>
    `,
    tags: ["Ерекшелік", "Жіктелу", "Функционалдық топ", "Көміртек"]
  },

  // 54
  {
    id: 2,
    title: "Органикалық қосылыстардың гомологтық қатарлары",
    icon: "fas fa-layer-group",
    color: "#2E7D32",
    content: `
      <h2>Гомологтық қатарлар</h2>
      <div style="background:#E8F5E9;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Гомологтар</strong> – бір кластағы, қасиеттері ұқсас, құрамы <strong>CH₂</strong>-ге айырмашылығы бар қосылыстар.</p>
        <p><strong>Гомологтық айырмашылық:</strong> –CH₂–</p>
      </div>
      <h3>Мысал (алкандар):</h3>
      <div class="interactive-formula">
        <div class="atom" style="background:#C8E6C9;">CH₄</div><div style="color:#666;">→</div>
        <div class="atom" style="background:#C8E6C9;">C₂H₆</div><div style="color:#666;">→</div>
        <div class="atom" style="background:#C8E6C9;">C₃H₈</div><div style="color:#666;">→</div>
        <div class="atom" style="background:#C8E6C9;">C₄H₁₀</div>
      </div>
      <p style="text-align:center;color:#666;">Әр қадамда CH₂ қосылады</p>
    `,
    tags: ["Гомолог", "CH₂", "Қатар", "Алкандар"]
  },

  // 55
  {
    id: 3,
    title: "Органикалық қосылыстардың номенклатурасы және изомериясы",
    icon: "fas fa-tags",
    color: "#FF9800",
    content: `
      <h2>Номенклатура және изомерия</h2>
      <div style="background:#FFF3E0;padding:20px;border-radius:10px;margin:20px 0;">
        <h3><i class="fas fa-pen"></i> IUPAC негіздері</h3>
        <ul>
          <li>Ең ұзын тізбек таңдалады</li>
          <li>Нөмірлеу — тармаққа жақын жақтан</li>
          <li>Қос байланыс/функц.топ орындары көрсетіледі</li>
        </ul>
      </div>
      <h3>Изомерия:</h3>
      <ul>
        <li><strong>Құрылымдық</strong> (тізбек, орын, функционалдық)</li>
        <li><strong>Кеңістіктік</strong> (цис-транс)</li>
      </ul>
      <div style="background:#E3F2FD;padding:20px;border-radius:10px;margin:20px 0;">
        <h4><i class="fas fa-cubes"></i> Мысал</h4>
        <p>Пентанның изомерлері: n-пентан, изопентан, неопентан.</p>
      </div>
    `,
    tags: ["IUPAC", "Изомерия", "Атаулар", "Пентан"]
  },

  // 56
  {
    id: 4,
    title: "Есеп: массалық үлес және салыстырмалы тығыздық арқылы молекулалық формула табу",
    icon: "fas fa-calculator",
    color: "#2196F3",
    content: `
      <h2>Есеп шығару: молекулалық формула</h2>
      <div style="background:#E3F2FD;padding:20px;border-radius:10px;margin:20px 0;">
        <h3>Алгоритм:</h3>
        <ol>
          <li>Массалық үлестерден зат мөлшер қатынасын тап (мольдік қатынас)</li>
          <li>Эмпирикалық формула құрастыр</li>
          <li>Газдың <strong>Mr</strong>-ін салыстырмалы тығыздықтан тап</li>
          <li>Молекулалық формула = (эмпирикалық) × n</li>
        </ol>
      </div>
      <p><strong>Еске салу:</strong> D(газ/Н₂) = Mr/2, D(газ/ауа) ≈ Mr/29</p>
    `,
    tags: ["Есеп", "Mr", "Тығыздық", "Массалық үлес"]
  },

  // 57
  {
    id: 5,
    title: "Алкандар",
    icon: "fas fa-fire",
    color: "#FF9800",
    content: `
      <h2>Алкандар</h2>
      <div style="background:#FFF3E0;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Жалпы формула:</strong> C<sub>n</sub>H<sub>2n+2</sub></p>
        <p><strong>Байланыс:</strong> тек σ-байланыс</p>
      </div>
      <h3>Реакциялар:</h3>
      <ul>
        <li>Жану: CH₄ + 2O₂ → CO₂ + 2H₂O</li>
        <li>Алмастыру (галогендеу): CH₄ + Cl₂ → CH₃Cl + HCl</li>
      </ul>
    `,
    tags: ["CₙH₂ₙ₊₂", "Метан", "Жану", "Алмастыру"]
  },

  // 58
  {
    id: 6,
    title: "Алкендер",
    icon: "fas fa-bolt",
    color: "#2196F3",
    content: `
      <h2>Алкендер</h2>
      <div style="background:#E3F2FD;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Жалпы формула:</strong> C<sub>n</sub>H<sub>2n</sub></p>
        <p><strong>Ерекшелік:</strong> 1 қос байланыс (π)</p>
      </div>
      <h3>Негізгі қасиет — қосылу:</h3>
      <ul>
        <li>Br₂ қосылуы (бром суын түссіздендіреді)</li>
        <li>H₂ қосылуы (гидрлеу)</li>
        <li>H₂O қосылуы (гидратация → спирт)</li>
      </ul>
    `,
    tags: ["CₙH₂ₙ", "Қосылу", "Бром суы", "Полимерлену"]
  },

  // 59
  {
    id: 7,
    title: "Алкиндер",
    icon: "fas fa-fire-alt",
    color: "#F44336",
    content: `
      <h2>Алкиндер</h2>
      <div style="background:#FFEBEE;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Жалпы формула:</strong> C<sub>n</sub>H<sub>2n-2</sub></p>
        <p><strong>Ерекшелік:</strong> 1 үштік байланыс (≡)</p>
        <p><strong>Негізгі өкіл:</strong> ацетилен C₂H₂</p>
      </div>
      <h3>Қосылу реакциялары:</h3>
      <ul>
        <li>Гидрлеу, галогендеу, гидратация</li>
        <li>Сапалық реакциялар (белсенділігі жоғары)</li>
      </ul>
    `,
    tags: ["CₙH₂ₙ₋₂", "Ацетилен", "Үштік байланыс", "Қосылу"]
  },

  // 60
  {
    id: 8,
    title: "Ароматты көмірсутектер. Бензол. Көмірсутекті отындар",
    icon: "fas fa-ring",
    color: "#9C27B0",
    content: `
      <h2>Ароматты көмірсутектер және отын</h2>
      <div style="background:#F3E5F5;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Бензол:</strong> C₆H₆ (ароматтылық қасиеті бар)</p>
        <p>Қасиеттері мен қолданылуы: еріткіш, хим.өнеркәсіп шикізаты.</p>
      </div>
      <h3>Көмірсутекті отындар:</h3>
      <ul>
        <li>Көмір, мұнай, табиғи газ</li>
        <li>Артықшылық/кемшілік, экологиялық әсер</li>
        <li>Альтернативті отын түрлері</li>
      </ul>
    `,
    tags: ["Бензол", "Ароматты", "Отын", "Экология"]
  },

  // 61
  {
    id: 9,
    title: "Мұнай және мұнай өнімдері",
    icon: "fas fa-oil-can",
    color: "#795548",
    content: `
      <h2>Мұнай</h2>
      <div style="background:#FFF8E1;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Мұнай</strong> – көмірсутектер қоспасы.</p>
        <p><strong>Айдау (фракциялау):</strong> бензин, керосин, дизель, мазут т.б.</p>
      </div>
      <h3>Қолданылуы:</h3>
      <ul>
        <li>Отын</li>
        <li>Полимерлер, пластмасса, синтетика өндірісі</li>
      </ul>
    `,
    tags: ["Мұнай", "Фракциялар", "Айдау", "Өнімдер"]
  },

  // 62
  {
    id: 10,
    title: "Оттекті органикалық заттар. Спирттер",
    icon: "fas fa-wine-glass-alt",
    color: "#009688",
    content: `
      <h2>Спирттер</h2>
      <div style="background:#E0F2F1;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Функционалдық топ:</strong> -OH</p>
        <p><strong>Жалпы түрі:</strong> R–OH</p>
      </div>
      <h3>Маңыздысы:</h3>
      <ul>
        <li>Метанол — <strong>улы</strong></li>
        <li>Этанол — антисептик, еріткіш</li>
        <li>Этиленгликоль, глицерин — қолданылуы</li>
      </ul>
    `,
    tags: ["-OH", "Метанол", "Этанол", "Глицерин"]
  },

  // 63
  {
    id: 11,
    title: "Карбон қышқылдары",
    icon: "fas fa-lemon",
    color: "#FFC107",
    content: `
      <h2>Карбон қышқылдары</h2>
      <div style="background:#FFF8E1;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Функционалдық топ:</strong> -COOH</p>
        <p><strong>Мысал:</strong> сірке қышқылы CH₃COOH</p>
      </div>
      <h3>Қасиеттері:</h3>
      <ul>
        <li>Негіздермен: R-COOH + NaOH → R-COONa + H₂O</li>
        <li>Металдармен (тұз + H₂)</li>
      </ul>
      <div style="background:#E3F2FD;padding:20px;border-radius:10px;margin:20px 0;">
        <h4><i class="fas fa-flask"></i> Зертхана</h4>
        <p>Сірке қышқылының қасиеттерін зерттеу.</p>
      </div>
    `,
    tags: ["-COOH", "Сірке қышқылы", "Тұз", "Зертхана"]
  },

  // 64
  {
    id: 12,
    title: "Күрделі эфирлер, майлар. Сабын және синтетикалық жуғыш заттар",
    icon: "fas fa-soap",
    color: "#00BCD4",
    content: `
      <h2>Күрделі эфирлер және майлар</h2>
      <div style="background:#E0F7FA;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Эфирлену:</strong> қышқыл + спирт → күрделі эфир + су</p>
        <p><strong>Майлар</strong> – глицерин мен жоғары қышқылдардың күрделі эфирлері.</p>
      </div>
      <h3>Сабын және СЖЗ:</h3>
      <ul>
        <li>Сабын алу және қолданылуы</li>
        <li>Синтетикалық жуғыш заттардың қоршаған ортаға әсері</li>
      </ul>
    `,
    tags: ["Эфир", "Май", "Сабын", "Экология"]
  },

  // 65
  {
    id: 13,
    title: "Көмірсулар",
    icon: "fas fa-candy-cane",
    color: "#FF5722",
    content: `
      <h2>Көмірсулар</h2>
      <div style="background:#FBE9E7;padding:20px;border-radius:10px;margin:20px 0;">
        <h3>Жіктелуі:</h3>
        <ul>
          <li><strong>Моносахаридтер</strong> (глюкоза)</li>
          <li><strong>Дисахаридтер</strong> (сахароза)</li>
          <li><strong>Полисахаридтер</strong> (крахмал, целлюлоза)</li>
        </ul>
      </div>
      <h3>Биологиялық маңызы:</h3>
      <ul>
        <li>Энергия көзі</li>
        <li>Құрылымдық қызмет</li>
        <li>Қор жинау</li>
      </ul>
    `,
    tags: ["Глюкоза", "Крахмал", "Жіктелу", "Биология"]
  },

  // 66
  {
    id: 14,
    title: "Амин қышқылдары және нәруыздар. Денатурация",
    icon: "fas fa-dna",
    color: "#3F51B5",
    content: `
      <h2>Аминқышқылдар және нәруыздар</h2>
      <div style="background:#E8EAF6;padding:20px;border-radius:10px;margin:20px 0;">
        <p><strong>Аминқышқыл</strong>: құрамында -NH₂ және -COOH топтары бар.</p>
        <p><strong>Пептидтік байланыс</strong> арқылы нәруыз түзіледі.</p>
      </div>
      <h3>Нәруыз:</h3>
      <ul>
        <li>Құрылымдық, ферменттік, қорғаныш қызметтер</li>
        <li><strong>Денатурация</strong> – нәруыз құрылымының бұзылуы</li>
      </ul>
      <div style="background:#E8F5E9;padding:20px;border-radius:10px;margin:20px 0;">
        <h4><i class="fas fa-flask"></i> Зертхана</h4>
        <p>Нәруыздардың денатурациясы.</p>
      </div>
    `,
    tags: ["Аминқышқыл", "Нәруыз", "Пептид", "Денатурация"]
  }
];

        // ==================== ТЕСТ СҰРАҚТАРЫ ====================
        const tests = [
            {
                topic: "Органикалық химия негіздері",
                questions: [
                    {
                        question: "Органикалық химия қандай элементтің қосылыстарын зерттейді?",
                        options: ["Темір", "Көміртек", "Күкірт", "Азот"],
                        correct: 1,
                        explanation: "Органикалық химия - көміртек қосылыстарының химиясы."
                    },
                    {
                        question: "Көміртек атомының валенттілігі неше?",
                        options: ["2", "3", "4", "5"],
                        correct: 2,
                        explanation: "Көміртек атомының валенттілігі IV."
                    },
                    {
                        question: "Гомологтар дегеніміз не?",
                        options: [
                            "Бір элементтен тұратын қосылыстар",
                            "Бір түрдегі, бірақ молекулалық массалары әртүрлі қосылыстар тізбегі",
                            "Бір-біріне изомер болатын қосылыстар",
                            "Тек көміртек пен сутектен тұратын қосылыстар"
                        ],
                        correct: 1,
                        explanation: "Гомологтар - бір типтік формулаға ие, бірақ молекулалық массалары CH₂ тобына сәйкес өзгеретін қосылыстар тізбегі."
                    },
                    {
                        question: "Изомерлердің негізгі түрлері қанша?",
                        options: ["1", "2", "3", "4"],
                        correct: 1,
                        explanation: "Изомерлердің негізгі екі түрі бар: құрылымдық изомерлер және кеңістік изомерлер."
                    },
                    {
                        question: "Органикалық қосылыстардың саны шамамен қанша?",
                        options: ["10 мың", "100 мың", "1 миллион", "10 миллионнан астам"],
                        correct: 3,
                        explanation: "Органикалық қосылыстардың саны 10 миллионнан астам, ал бейорганикалық қосылыстардың саны шамамен 100 мың."
                    }
                ]
            },
            {
                topic: "Алкандар",
                questions: [
                    {
                        question: "Алкандардың жалпы формуласы қандай?",
                        options: ["CₙH₂ₙ", "CₙH₂ₙ₊₂", "CₙH₂ₙ₋₂", "CₙH₂ₙ₋₆"],
                        correct: 1,
                        explanation: "Алкандар - қаныққан көмірсутектер, олардың жалпы формуласы CₙH₂ₙ₊₂."
                    },
                    {
                        question: "Метанның формуласы қандай?",
                        options: ["CH₄", "C₂H₆", "C₃H₈", "C₄H₁₀"],
                        correct: 0,
                        explanation: "Метан - ең қарапайым көмірсутек, оның формуласы CH₄."
                    },
                    {
                        question: "Алкандардың негізгі химиялық қасиеті?",
                        options: ["Қосылу", "Алмастыру", "Тотығу", "Ыдырау"],
                        correct: 1,
                        explanation: "Алкандарға алмастыру реакциялары тән."
                    },
                    {
                        question: "Бутанның қанша изомері бар?",
                        options: ["1", "2", "3", "4"],
                        correct: 1,
                        explanation: "Бутанның 2 изомері бар: түзу тізбекті бутан және изобутан."
                    },
                    {
                        question: "Көмірсутектердің қайсысы газ күйінде болады?",
                        options: ["Пентан", "Гексан", "Метан", "Декан"],
                        correct: 2,
                        explanation: "C₁-C₄ көмірсутектері газ күйінде болады."
                    }
                ]
            },
            {
                topic: "Алкендер",
                questions: [
                    {
                        question: "Алкендердің жалпы формуласы қандай?",
                        options: ["CₙH₂ₙ₊₂", "CₙH₂ₙ", "CₙH₂ₙ₋₂", "CₙH₂ₙ₋₆"],
                        correct: 1,
                        explanation: "Алкендер - қос байланысты көмірсутектер, олардың жалпы формуласы CₙH₂ₙ."
                    },
                    {
                        question: "Этиленнің формуласы қандай?",
                        options: ["C₂H₂", "C₂H₄", "C₂H₆", "C₃H₆"],
                        correct: 1,
                        explanation: "Этилен (этен) - C₂H₄."
                    },
                    {
                        question: "Алкендердің негізгі химиялық қасиеті?",
                        options: ["Алмастыру", "Қосылу", "Тотығу", "Ыдырау"],
                        correct: 1,
                        explanation: "Алкендерге қосылу реакциялары тән."
                    },
                    {
                        question: "Алкендерді сапалық анықтауға қандай реактив қолданылады?",
                        options: ["Күкірт қышқылы", "Азот қышқылы", "Бром суы", "Тұз қышқылы"],
                        correct: 2,
                        explanation: "Бром суы алкендерді түссіздендіреді."
                    },
                    {
                        question: "Этиленнен полиэтилен алу реакциясы қалай аталады?",
                        options: ["Гидрлеу", "Галогендеу", "Полимерлену", "Гидратация"],
                        correct: 2,
                        explanation: "Полимерлену - көптеген мономер молекулаларының үлкен молекулаға бірігуі."
                    }
                ]
            },
            {
                topic: "Алкиндер",
                questions: [
                    {
                        question: "Алкиндердің жалпы формуласы қандай?",
                        options: ["CₙH₂ₙ₊₂", "CₙH₂ₙ", "CₙH₂ₙ₋₂", "CₙH₂ₙ₋₆"],
                        correct: 2,
                        explanation: "Алкиндер - үштік байланысты көмірсутектер, олардың жалпы формуласы CₙH₂ₙ₋₂."
                    },
                    {
                        question: "Ацетиленнің формуласы қандай?",
                        options: ["C₂H₂", "C₂H₄", "C₂H₆", "C₃H₄"],
                        correct: 0,
                        explanation: "Ацетилен (этин) - C₂H₂."
                    },
                    {
                        question: "Ацетиленді қалай алады?",
                        options: [
                            "Этанолды тотықтыру",
                            "Карбидті сумен әрекеттестіру",
                            "Метанды гидрлеу",
                            "Этиленді полимерлеу"
                        ],
                        correct: 1,
                        explanation: "CaC₂ + 2H₂O → C₂H₂ + Ca(OH)₂."
                    },
                    {
                        question: "Алкиндердің негізгі химиялық қасиеті?",
                        options: ["Алмастыру", "Қосылу", "Тотығу", "Ыдырау"],
                        correct: 1,
                        explanation: "Алкиндерге де қосылу реакциялары тән."
                    },
                    {
                        question: "Ацетилен сутектен өткізілгенде не түзіледі?",
                        options: ["Метан", "Этан", "Этилен", "Бензол"],
                        correct: 2,
                        explanation: "C₂H₂ + H₂ → C₂H₄ (этилен)."
                    }
                ]
            },
            {
                topic: "Спирттер",
                questions: [
                    {
                        question: "Спирттердің функционалдық тобы қандай?",
                        options: ["-COOH", "-OH", "-CHO", "-NH₂"],
                        correct: 1,
                        explanation: "Спирттердің функционалдық тобы - гидроксил тобы (-OH)."
                    },
                    {
                        question: "Этанолдың формуласы қандай?",
                        options: ["CH₃OH", "C₂H₅OH", "C₃H₇OH", "C₄H₉OH"],
                        correct: 1,
                        explanation: "Этанол - C₂H₅OH."
                    },
                    {
                        question: "Метанолды тотықтырғанда не түзіледі?",
                        options: ["Этанол", "Формальдегид", "Ацетальдегид", "Сірке қышқылы"],
                        correct: 1,
                        explanation: "Метанол тотыққанда формальдегид түзіледі."
                    },
                    {
                        question: "Үш атомды спирт қайсысы?",
                        options: ["Метанол", "Этанол", "Глицерин", "Этиленгликоль"],
                        correct: 2,
                        explanation: "Глицерин - үш атомды спирт."
                    },
                    {
                        question: "Спирттерді дегидратациялағанда не түзіледі?",
                        options: ["Альдегидтер", "Кетондар", "Алкендер", "Алкандар"],
                        correct: 2,
                        explanation: "Спирттерді дегидратациялау алкендер береді."
                    }
                ]
            },
            {
                topic: "Карбон қышқылдары",
                questions: [
                    {
                        question: "Карбон қышқылдарының функционалдық тобы қандай?",
                        options: ["-OH", "-CHO", "-COOH", "-NH₂"],
                        correct: 2,
                        explanation: "Карбоксил тобы (-COOH)."
                    },
                    {
                        question: "Сірке қышқылының формуласы қандай?",
                        options: ["HCOOH", "CH₃COOH", "C₂H₅COOH", "C₃H₇COOH"],
                        correct: 1,
                        explanation: "Сірке қышқылы - CH₃COOH."
                    },
                    {
                        question: "Ең қарапайым қаныққан карбон қышқылы?",
                        options: ["Сірке қышқылы", "Муравьин қышқылы", "Пропион қышқылы", "Май қышқылдары"],
                        correct: 1,
                        explanation: "Муравьин қышқылы (HCOOH) - ең қарапайым."
                    },
                    {
                        question: "Карбон қышқылдары металдармен әрекеттескенде не түзіледі?",
                        options: ["Тұздар", "Спирттер", "Альдегидтер", "Эфирлер"],
                        correct: 0,
                        explanation: "Карбоксилат тұздары түзіледі."
                    },
                    {
                        question: "Қышқылдар мен спирттердің әрекеттесуі нені береді?",
                        options: ["Альдегидтер", "Кетондар", "Эфирлер", "Аминдер"],
                        correct: 2,
                        explanation: "Этерификация реакциясы - эфирлер түзіледі."
                    }
                ]
            },
            {
                topic: "Аминдер",
                questions: [
                    {
                        question: "Аминдердің функционалдық тобы қандай?",
                        options: ["-OH", "-CHO", "-COOH", "-NH₂"],
                        correct: 3,
                        explanation: "Амино тобы (-NH₂)."
                    },
                    {
                        question: "Ең қарапайым амин қайсысы?",
                        options: ["Метиламин", "Этиламин", "Анилин", "Диметиламин"],
                        correct: 0,
                        explanation: "Метиламин (CH₃NH₂) - ең қарапайым."
                    },
                    {
                        question: "Аминдердің негіздік қасиетіне не себеп?",
                        options: [
                            "Көміртек атомының болуы",
                            "Азот атомындағы бос электрон жұбы",
                            "Сутегі атомдарының болуы",
                            "Кислород атомының болуы"
                        ],
                        correct: 1,
                        explanation: "Азот атомындағы бос электрон жұбы протонды қабылдай алады."
                    },
                    {
                        question: "Анилиннің формуласы қандай?",
                        options: ["C₆H₅-NH₂", "C₆H₅-OH", "C₆H₅-COOH", "C₆H₅-CHO"],
                        correct: 0,
                        explanation: "Анилин - фениламин, C₆H₅-NH₂."
                    },
                    {
                        question: "Аминқышқылдардың ең қарапайым өкілі?",
                        options: ["Аланин", "Глицин", "Валин", "Лизин"],
                        correct: 1,
                        explanation: "Глицин - H₂N-CH₂-COOH."
                    }
                ]
            },
            {
                topic: "Нәруыздар",
                questions: [
                    {
                        question: "Нәруыздардың негізгі құрылымдық бірлігі?",
                        options: ["Нуклеотидтер", "Аминқышқылдар", "Моносахаридтер", "Май қышқылдары"],
                        correct: 1,
                        explanation: "Нәруыздар аминқышқылдардан тұрады."
                    },
                    {
                        question: "Нәруыздарда қанша аминқышқыл бар?",
                        options: ["10", "20", "30", "40"],
                        correct: 1,
                        explanation: "Табиғи нәруыздарда 20 аминқышқыл кездеседі."
                    },
                    {
                        question: "Ферменттер деген не?",
                        options: [
                            "Гормондар",
                            "Биологиялық катализаторлар",
                            "Энергия көздері",
                            "Құрылымдық компоненттер"
                        ],
                        correct: 1,
                        explanation: "Ферменттер - биологиялық катализаторлар."
                    },
                    {
                        question: "ДНҚ-ның толық атауы?",
                        options: [
                            "Дезоксирибонуклеин қышқылы",
                            "Рибонуклеин қышқылы",
                            "Дезоксирибоза нуклеотиді",
                            "Рибоза нуклеин қышқылы"
                        ],
                        correct: 0,
                        explanation: "ДНҚ - дезоксирибонуклеин қышқылы."
                    },
                    {
                        question: "Нәруыздардың негізгі функциясы?",
                        options: [
                            "Тек құрылымдық",
                            "Тек ферменттік",
                            "Тек қорғаныс",
                            "Көптеген функцияларды орындайды"
                        ],
                        correct: 3,
                        explanation: "Нәруыздар құрылымдық, ферменттік, қорғаныс, тасымалдау және басқа да функцияларды орындайды."
                    }
                ]
            }
        ];

        // ==================== ФОРМУЛА КОНСТРУКТОР ====================
        const formulaTasks = [
            {
                name: "Метан",
                formula: "CH₄",
                elements: ["C", "H", "H", "H", "H"],
                description: "Ең қарапайым көмірсутек. Табиғи газдың негізгі құрамдас бөлігі.",
                hint: "1 көміртек атомы және 4 сутегі атомы"
            },
            {
                name: "Этан",
                formula: "C₂H₆",
                elements: ["C", "C", "H", "H", "H", "H", "H", "H"],
                description: "Екі көміртек атомы бар қаныққан көмірсутек.",
                hint: "2 көміртек атомы және 6 сутегі атомы"
            },
            {
                name: "Этилен",
                formula: "C₂H₄",
                elements: ["C", "C", "H", "H", "H", "H"],
                description: "Қос байланысты көмірсутек. Полиэтиленнің мономері.",
                hint: "2 көміртек атомы (қос байланыспен) және 4 сутегі атомы"
            },
            {
                name: "Ацетилен",
                formula: "C₂H₂",
                elements: ["C", "C", "H", "H"],
                description: "Үштік байланысты көмірсутек. Дәнекерлеу үшін қолданылады.",
                hint: "2 көміртек атомы (үштік байланыспен) және 2 сутегі атомы"
            },
            {
                name: "Этанол",
                formula: "C₂H₅OH",
                elements: ["C", "C", "H", "H", "H", "H", "H", "O", "H"],
                description: "Ең көп тараған спирт. Антисептик ретінде қолданылады.",
                hint: "2 көміртек, 6 сутегі және 1 оттегі атомы"
            },
            {
                name: "Сірке қышқылы",
                formula: "CH₃COOH",
                elements: ["C", "H", "H", "H", "C", "O", "O", "H"],
                description: "Карбон қышқылы. Сірке суының негізгі компоненті.",
                hint: "2 көміртек, 4 сутегі және 2 оттегі атомы"
            }
        ];

        // ==================== ПРАКТИКАЛЫҚ ТАПСЫРМАЛАР ====================
        const practicalTasks = [
            {
                id: 1,
                question: "Пропанның (C₃H₈) молекулалық массасын есептеңіз.",
                answer: "44",
                explanation: "C₃H₈ = (12×3) + (1×8) = 36 + 8 = 44 г/моль",
                hint: "Көміртектің атомдық массасы 12, сутектің атомдық массасы 1"
            },
            {
                id: 2,
                question: "Этанолды тотықтырғанда 4,4 г этаналь түзілді. Реакцияға қанша грамм этанол жұмсалды?",
                answer: "4.6",
                explanation: "C₂H₅OH → CH₃CHO (46 г → 44 г). Пропорция: 46 г этанол → 44 г этаналь, x г этанол → 4,4 г этаналь. x = (46 × 4,4) / 44 = 4,6 г",
                hint: "Этанолдың молекулалық массасы 46, этанальдың молекулалық массасы 44"
            },
            {
                id: 3,
                question: "Пентанның (C₅H₁₂) қанша изомері бар?",
                answer: "3",
                explanation: "Пентанның 3 изомері бар: n-пентан (түзу тізбек), изопентан (метилбутан) және неопентан (диметилпропан)",
                hint: "Көміртек тізбегінің тармақталу нұсқаларын қарастырыңыз"
            },
            {
                id: 4,
                question: "Глюкозадағы (C₆H₁₂O₆) көміртектің массалық үлесін есептеңіз.",
                answer: "40%",
                explanation: "Глюкозаның молекулалық массасы = (12×6)+(1×12)+(16×6)=72+12+96=180 г/моль. Көміртектің массалық үлесі = (72/180)×100% = 40%",
                hint: "Көміртектің жалпы массасын молекулалық массаға бөліп, 100% көбейтіңіз"
            }
        ];

        // ==================== ГЛОБАЛДЫҚ АЙНЫМАЛЫЛАР ====================
        let currentTest = null;
        let currentTestIndex = 0;
        let testScore = 0;
        let currentFormulaTask = formulaTasks[0];
        let workspaceElements = [];

        // ==================== ФУНКЦИЯЛАР ====================

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            loadLessons();
            loadTestTopics();
            loadFormulaBuilder();
            loadPracticalTasks();
        });

        // Загрузка уроков
        function loadLessons() {
            const container = document.getElementById('lessonsContainer');
            container.innerHTML = '';
            
            lessons.forEach(lesson => {
                const card = document.createElement('div');
                card.className = 'lesson-card';
                card.onclick = () => openLesson(lesson.id - 1);
                
                card.innerHTML = `
                    <div class="lesson-icon" style="color: ${lesson.color}">
                        <i class="${lesson.icon}"></i>
                    </div>
                    <div class="lesson-content">
                        <h3>${lesson.title}</h3>
                        <p>${lesson.content.substring(0, 100)}...</p>
                        <div class="lesson-tags">
                            ${lesson.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // Открытие урока
        function openLesson(index) {
            const lesson = lessons[index];
            const modal = document.getElementById('lessonModal');
            const content = document.getElementById('lessonContent');
            
            content.innerHTML = lesson.content;
            modal.style.display = 'block';
            
            // Добавляем кнопку закрытия в контент
            const closeBtn = document.createElement('button');
            closeBtn.className = 'btn btn-primary';
            closeBtn.innerHTML = '<i class="fas fa-times"></i> Жабу';
            closeBtn.style.marginTop = '20px';
            closeBtn.onclick = closeModal;
            content.appendChild(closeBtn);
        }

        // Закрытие модального окна
        function closeModal() {
            document.getElementById('lessonModal').style.display = 'none';
        }

        // Загрузка тем тестов
        function loadTestTopics() {
            const container = document.getElementById('testTopics');
            container.innerHTML = '';
            
            tests.forEach((test, index) => {
                const topic = document.createElement('div');
                topic.className = 'task';
                topic.innerHTML = `
                    <h4>${test.topic}</h4>
                    <p>${test.questions.length} сұрақ</p>
                    <button class="btn btn-primary" onclick="startTest(${index})">
                        <i class="fas fa-play"></i> Бастау
                    </button>
                `;
                container.appendChild(topic);
            });
        }

        // Начало теста
        function startTest(index) {
            currentTest = tests[index];
            currentTestIndex = 0;
            testScore = 0;
            
            document.getElementById('testTopics').style.display = 'none';
            document.getElementById('testQuestions').style.display = 'block';
            document.getElementById('testResult').style.display = 'none';
            
            loadQuestion();
        }

        // Загрузка вопроса
        function loadQuestion() {
            const container = document.getElementById('testQuestions');
            const question = currentTest.questions[currentTestIndex];
            
            container.innerHTML = `
                <div class="question">
                    <h3>${currentTestIndex + 1}. ${question.question}</h3>
                    <div class="options" id="optionsContainer">
                        ${question.options.map((option, i) => `
                            <div class="option" onclick="selectOption(${i})" id="option${i}">
                                ${String.fromCharCode(65 + i)}. ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div id="explanation" style="display: none; margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 8px;"></div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="checkAnswer()">
                            <i class="fas fa-check"></i> Жауапты тексеру
                        </button>
                        <button class="btn" onclick="nextQuestion()" style="background: #f0f0f0;">
                            <i class="fas fa-arrow-right"></i> Келесі сұрақ
                        </button>
                    </div>
                </div>
            `;
            
            // Обновляем прогресс
            const progress = ((currentTestIndex + 1) / currentTest.questions.length) * 100;
            document.getElementById('testProgress').style.width = `${progress}%`;
        }

        // Выбор варианта ответа
        function selectOption(index) {
            // Снимаем выделение со всех вариантов
            for (let i = 0; i < 4; i++) {
                const option = document.getElementById(`option${i}`);
                if (option) option.classList.remove('selected');
            }
            
            // Выделяем выбранный вариант
            const selected = document.getElementById(`option${index}`);
            if (selected) selected.classList.add('selected');
        }

        // Проверка ответа
        function checkAnswer() {
            const question = currentTest.questions[currentTestIndex];
            const selected = document.querySelector('.option.selected');
            
            if (!selected) {
                alert('Жауапты таңдаңыз!');
                return;
            }
            
            const selectedIndex = Array.from(document.querySelectorAll('.option')).indexOf(selected);
            const isCorrect = selectedIndex === question.correct;
            
            // Показываем объяснение
            const explanationDiv = document.getElementById('explanation');
            explanationDiv.style.display = 'block';
            explanationDiv.innerHTML = `
                <strong>${isCorrect ? '✅ Дұрыс!' : '❌ Қате!'}</strong><br>
                ${question.explanation}
            `;
            
            if (isCorrect) {
                testScore++;
            }
            
            // Делаем правильный ответ зеленым
            const correctOption = document.getElementById(`option${question.correct}`);
            if (correctOption) correctOption.style.background = '#E8F5E9';
            
            // Делаем неправильный ответ красным (если был выбран)
            if (!isCorrect) {
                selected.style.background = '#FFEBEE';
            }
        }

        // Следующий вопрос
        function nextQuestion() {
            currentTestIndex++;
            
            if (currentTestIndex >= currentTest.questions.length) {
                showTestResult();
            } else {
                loadQuestion();
            }
        }

        // Показать результат теста
        function showTestResult() {
            const percentage = Math.round((testScore / currentTest.questions.length) * 100);
            
            document.getElementById('testQuestions').style.display = 'none';
            document.getElementById('testResult').style.display = 'block';
            
            let message = '';
            let emoji = '';
            
            if (percentage >= 90) {
                message = 'Тамаша! Сіз тақырыпты жақсы меңгергенсіз!';
                emoji = '🏆';
            } else if (percentage >= 70) {
                message = 'Жақсы! Біраз жетіспейтіндеріңіз бар.';
                emoji = '👍';
            } else if (percentage >= 50) {
                message = 'Орташа. Көбірек жаттығу қажет.';
                emoji = '📚';
            } else {
                message = 'Сабақтарды қайталап шығыңыз.';
                emoji = '🔍';
            }
            
            document.getElementById('testResult').innerHTML = `
                <h3>Тест аяқталды!</h3>
                <div style="font-size: 3rem; margin: 20px 0;">${emoji}</div>
                <h4>${testScore}/${currentTest.questions.length} дұрыс жауап</h4>
                <p>${message}</p>
                <div class="progress-bar">
                    <div class="progress" style="width: ${percentage}%"></div>
                </div>
                <p style="margin-top: 10px;">${percentage}%</p>
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="restartTest()">
                        <i class="fas fa-redo"></i> Қайта бастау
                    </button>
                    <button class="btn" onclick="backToTopics()" style="background: #f0f0f0;">
                        <i class="fas fa-list"></i> Тақырыптарға оралу
                    </button>
                </div>
            `;
        }

        // Перезапуск теста
        function restartTest() {
            startTest(tests.indexOf(currentTest));
        }

        // Возврат к темам
        function backToTopics() {
            document.getElementById('testQuestions').style.display = 'none';
            document.getElementById('testResult').style.display = 'none';
            document.getElementById('testTopics').style.display = 'block';
            document.getElementById('testProgress').style.width = '0%';
        }

        // Загрузка конструктора формул
        function loadFormulaBuilder() {
            const palette = document.getElementById('elementPalette');
            const elements = ['C', 'H', 'O', 'N', 'Cl', 'Br'];
            
            palette.innerHTML = '';
            
            elements.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'element';
                elementDiv.textContent = element;
                elementDiv.onclick = () => addElementToWorkspace(element);
                palette.appendChild(elementDiv);
            });
            
            // Устанавливаем первую задачу
            setFormulaTask(0);
        }

        // Установка задачи по формуле
        function setFormulaTask(index) {
            currentFormulaTask = formulaTasks[index];
            workspaceElements = [];
            
            document.getElementById('taskName').textContent = currentFormulaTask.name;
            document.getElementById('taskDescription').textContent = currentFormulaTask.formula;
            
            clearWorkspace();
            document.getElementById('formulaResult').style.display = 'none';
        }

        // Добавление элемента в рабочую область
        function addElementToWorkspace(element) {
            const workspace = document.getElementById('workspace');
            
            // Убираем placeholder если он есть
            if (workspace.innerHTML.includes('Бұл жерге элементтерді тартыңыз')) {
                workspace.innerHTML = '';
            }
            
            workspaceElements.push(element);
            
            const elementDiv = document.createElement('div');
            elementDiv.className = 'element';
            elementDiv.textContent = element;
            elementDiv.onclick = function() {
                // Удаляем элемент при клике
                const index = workspaceElements.indexOf(element);
                if (index > -1) {
                    workspaceElements.splice(index, 1);
                }
                this.remove();
                
                // Если все элементы удалены, показываем placeholder
                if (workspace.children.length === 0) {
                    workspace.innerHTML = '<p style="color: #999; margin: auto;">Бұл жерге элементтерді тартыңыз</p>';
                }
            };
            
            workspace.appendChild(elementDiv);
        }

        // Очистка рабочей области
        function clearWorkspace() {
            const workspace = document.getElementById('workspace');
            workspace.innerHTML = '<p style="color: #999; margin: auto;">Бұл жерге элементтерді тартыңыз</p>';
            workspaceElements = [];
        }

        // Проверка формулы
        function checkFormula() {
            if (!currentFormulaTask) return;
            
            const resultDiv = document.getElementById('formulaResult');
            resultDiv.style.display = 'block';
            
            // Сортируем элементы для сравнения
            const userElements = [...workspaceElements].sort();
            const correctElements = [...currentFormulaTask.elements].sort();
            
            // Преобразуем в строки для сравнения
            const userFormula = userElements.join('');
            const correctFormula = correctElements.join('');
            
            if (userFormula === correctFormula) {
                resultDiv.className = 'result success';
                resultDiv.innerHTML = `
                    <h4>✅ Тамаша!</h4>
                    <p>Сіз дұрыс формуланы құрастырдыңыз: ${currentFormulaTask.formula}</p>
                    <p>${currentFormulaTask.description}</p>
                    <button class="btn btn-primary" onclick="nextFormulaTask()" style="margin-top: 10px;">
                        <i class="fas fa-arrow-right"></i> Келесі тапсырма
                    </button>
                `;
            } else {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <h4>❌ Қате!</h4>
                    <p>Дұрыс формула: ${currentFormulaTask.formula}</p>
                    <p>Сіздің формулаңыз: ${userElements.join('')}</p>
                    <p>Қайталап көріңіз!</p>
                `;
            }
        }

        // Следующая задача по формуле
        function nextFormulaTask() {
            const currentIndex = formulaTasks.indexOf(currentFormulaTask);
            const nextIndex = (currentIndex + 1) % formulaTasks.length;
            setFormulaTask(nextIndex);
        }

        // Показать подсказку
        function showHint() {
            if (!currentFormulaTask) return;
            
            const resultDiv = document.getElementById('formulaResult');
            resultDiv.style.display = 'block';
            resultDiv.className = 'result';
            resultDiv.innerHTML = `
                <h4>💡 Көмек:</h4>
                <p>${currentFormulaTask.hint}</p>
                <p>Формула: ${currentFormulaTask.formula}</p>
            `;
        }

        // Загрузка практических задач
        function loadPracticalTasks() {
            const container = document.getElementById('tasksContainer');
            container.innerHTML = '';
            
            practicalTasks.forEach(task => {
                const taskDiv = document.createElement('div');
                taskDiv.className = 'task';
                taskDiv.id = `task${task.id}`;
                
                taskDiv.innerHTML = `
                    <h4>${task.id}. ${task.question}</h4>
                    <input type="text" id="answer${task.id}" placeholder="Жауабыңызды енгізіңіз" 
                           style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="checkTask(${task.id})">
                            <i class="fas fa-check"></i> Тексеру
                        </button>
                        <button class="btn" onclick="showTaskHint(${task.id})" style="background: #FFF3E0;">
                            <i class="fas fa-lightbulb"></i> Көмек
                        </button>
                    </div>
                    <div id="result${task.id}" style="margin-top: 10px;"></div>
                `;
                
                container.appendChild(taskDiv);
            });
            
            // Добавляем кнопку проверки всех задач
            const checkAllBtn = document.createElement('button');
            checkAllBtn.className = 'btn btn-primary';
            checkAllBtn.innerHTML = '<i class="fas fa-check-double"></i> Барлығын тексеру';
            checkAllBtn.style.marginTop = '20px';
            checkAllBtn.onclick = checkAllTasks;
            container.appendChild(checkAllBtn);
            
            const totalResult = document.createElement('div');
            totalResult.id = 'totalResult';
            totalResult.style.marginTop = '20px';
            container.appendChild(totalResult);
        }

        // Проверка отдельной задачи
        function checkTask(id) {
            const task = practicalTasks.find(t => t.id === id);
            const answerInput = document.getElementById(`answer${id}`);
            const resultDiv = document.getElementById(`result${id}`);
            
            if (!task || !answerInput || !resultDiv) return;
            
            const userAnswer = answerInput.value.trim();
            
            if (userAnswer === task.answer) {
                resultDiv.innerHTML = `
                    <div style="color: green; background: #E8F5E9; padding: 10px; border-radius: 5px;">
                        <strong>✅ Дұрыс!</strong> ${task.explanation}
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div style="color: #C62828; background: #FFEBEE; padding: 10px; border-radius: 5px;">
                        <strong>❌ Қате!</strong> Дұрыс жауап: ${task.answer}<br>
                        ${task.explanation}
                    </div>
                `;
            }
        }

        // Показать подсказку для задачи
        function showTaskHint(id) {
            const task = practicalTasks.find(t => t.id === id);
            const resultDiv = document.getElementById(`result${id}`);
            
            if (!task || !resultDiv) return;
            
            resultDiv.innerHTML = `
                <div style="background: #FFF3E0; padding: 10px; border-radius: 5px;">
                    <strong>💡 Көмек:</strong> ${task.hint}
                </div>
            `;
        }

        // Проверка всех задач
        function checkAllTasks() {
            let correctCount = 0;
            
            practicalTasks.forEach(task => {
                const answerInput = document.getElementById(`answer${task.id}`);
                if (answerInput && answerInput.value.trim() === task.answer) {
                    correctCount++;
                }
                checkTask(task.id);
            });
            
            const percentage = Math.round((correctCount / practicalTasks.length) * 100);
            const totalResult = document.getElementById('totalResult');
            
            totalResult.innerHTML = `
                <div style="text-align: center; padding: 20px; background: ${percentage >= 70 ? '#E8F5E9' : '#FFF3E0'}; border-radius: 10px;">
                    <h4>Нәтиже: ${correctCount}/${practicalTasks.length}</h4>
                    <p>${percentage}% дұрыс</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: ${percentage}%"></div>
                    </div>
                </div>
            `;
        }

        // Мобильное меню
        function toggleMenu() {
            const menu = document.getElementById('navMenu');
            menu.classList.toggle('active');
        }

        // Начало обучения
        function startLearning() {
            document.querySelector('#lessons').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Выбор формулы из списка
        function selectFormula(index) {
            setFormulaTask(index);
            
            // Прокручиваем к конструктору формул
            document.querySelector('#formula').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Генерация случайной формулы
        function randomFormulaTask() {
            const randomIndex = Math.floor(Math.random() * formulaTasks.length);
            setFormulaTask(randomIndex);
        }

        // Добавляем кнопки для выбора формул
        document.addEventListener('DOMContentLoaded', function() {
            // Добавляем список формул в конструктор
            const formulaBuilder = document.querySelector('.formula-builder');
            const formulaList = document.createElement('div');
            formulaList.style.marginTop = '30px';
            formulaList.innerHTML = `
                <h4>Формулалар тізімі:</h4>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                    ${formulaTasks.map((task, index) => `
                        <button class="btn" onclick="selectFormula(${index})" 
                                style="background: #f0f0f0; padding: 8px 15px;">
                            ${task.name}
                        </button>
                    `).join('')}
                    <button class="btn" onclick="randomFormulaTask()" 
                            style="background: var(--accent); color: white; padding: 8px 15px;">
                        <i class="fas fa-random"></i> Кездейсоқ
                    </button>
                </div>
            `;
            
            formulaBuilder.appendChild(formulaList);
        });

        // Автоматическая прокрутка при клике на меню
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                    
                    // Закрываем мобильное меню
                    const menu = document.getElementById('navMenu');
                    menu.classList.remove('active');
                }
            });
        });

        // Инициализация при загрузке
        window.onload = function() {
            // Запускаем первую задачу в конструкторе формул
            loadFormulaBuilder();
            
            // Показываем приветственное сообщение
            setTimeout(() => {
                if (!localStorage.getItem('welcomeShown')) {
                    alert('Қош келдіңіз! Органикалық химияның қызықты әлеміне саяхат басталады. Оқуды бастау үшін "Сабақтар" бөліміне өтіңіз.');
                    localStorage.setItem('welcomeShown', 'true');
                }
            }, 1000);
        };
    </script>
</body>
</html>
